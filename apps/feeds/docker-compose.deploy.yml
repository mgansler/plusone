version: '3'

services:
  core:
    image: ${FEEDS_BACKEND_DOCKER_IMAGE}
    depends_on:
      - database
    environment:
      JWT_SECRET: not_so_secret
      DATABASE_URL: postgres://postgres:super_secret@database/feeds
      ADMIN_USER: root
      ADMIN_PASSWORD: keep_this_secret
    ports:
      - '3333:3333'

  database:
    image: postgres:12-alpine
    environment:
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: super_secret
      POSTGRES_DB: feeds

networks:
  traefik:
    external:
      name: traefik
